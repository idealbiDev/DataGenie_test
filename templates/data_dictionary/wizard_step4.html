{% extends "client_home_base.html" %}

{% block title %}New Connection - Step 1{% endblock %}

{% block content %}
<div class="step-indicator">
      <div class="step completed">
        <div class="step-number"><i class="fas fa-check"></i></div>
        <div class="step-title">Introduction</div>
    </div>
    <div class="step completed">
        <div class="step-number"><i class="fas fa-check"></i></div>
        <div class="step-title">Database Type</div>
    </div>
    <div class="step completed">
        <div class="step-number"><i class="fas fa-check"></i></div>
        <div class="step-title">Connection Details</div>
    </div>
    <div class="step completed">
        <div class="step-number"><i class="fas fa-check"></i></div>
        <div class="step-title">Database Details</div>
    </div>
    <div class="step active">
        <div class="step-number">4</div>
        <div class="step-title">Database Schemas</div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        {% if db_type == 'file_system' %}
        {% set select_no = 'Max 5 Files' %}
        {% set service_next = url_for('data_dictionary.dbservice') %}
        <h3><i class="fas fa-folder-open me-2"></i>Data Files in Path</h3>
        {% else %}
        {% set service_next = url_for('data_dictionary.dbservice') %}
        {% set select_no = 'Only 1 Schema allowed' %}
        <h3><i class="fas fa-database me-2"></i>Database: {{form_data['database'] }}</h3>
        {% endif %}
    </div>
    <div class="card-body">
    
        <form method="POST" action="{{ service_next }}">
            <input type="hidden" name="db_type" value="{{db_type }}">
            <input type="hidden" name="conn_str" value="{{conn_str }}">
            <input type="hidden" name="conn_params" value="{{form_data }}">
            {% if db_type == 'file_system' %}
            {% for dl in data_list %}
            <input type="checkbox" id="{{dl}}" name="{{dl}}" value="{{dl}}">
            <label for="{{dl}}"> {{dl}}</label><br>
            {% endfor %}
           <br><br>
                {% else %}
           {% for dl in data_list %}
                    <input type="radio" id="{{dl}}" name="schema" value="{{dl}}">
                    <label for="{{dl}}">{{dl}}</label><br>
                {% endfor %}
                <br><br>
         {%endif%}
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            {{select_no}} 
        </div>
        <div class="d-flex justify-content-between mt-4">
            <a href="{{ url_for('data_dictionary.dbselect_type') }}" class="btn btn-secondary">
                <i class="fas fa-arrow-left me-1"></i> Back 
            </a>
            <div>
               
                <button type="submit" class="btn btn-primary">
                    Next <i class="fas fa-arrow-right ms-1"></i>
                </button>
            </div>
        </div>
        
        
    </form>
    </div>
</div>
{% endblock %}